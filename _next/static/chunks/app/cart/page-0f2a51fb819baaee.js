(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{1418:function(e,t,r){Promise.resolve().then(r.bind(r,9605))},9605:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(7437),i=r(9257),a=r(2030),s=r(7138),o=r(6648),c=r(8030);let u=(0,c.Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),l=(0,c.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),d=(0,c.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var f=r(495),m=r(8277);function h(e){let{id:t,title:r,price:a,quantity:s,image:c}=e,{removeFromCart:h,updateQuantity:x}=(0,i.j)(),v=e=>"number"==typeof e?e.toFixed(2):"0.00",p=e=>{x(parseInt(t),e,a)};return(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-4 py-4 border-b border-gray-200",children:[(0,n.jsx)("div",{className:"relative w-24 h-24 flex-shrink-0",children:(0,n.jsx)(o.default,{src:m.m.getOptimizedPath(c),alt:r,width:100,height:100,className:"object-cover rounded"})}),(0,n.jsxs)("div",{className:"flex-grow text-center sm:text-left",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:r}),(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:[v(a),"€"]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(f.z,{variant:"outline",size:"icon",onClick:()=>p(Math.max(1,s-1)),"aria-label":"Decrease quantity",children:(0,n.jsx)(u,{className:"h-4 w-4"})}),(0,n.jsx)("span",{className:"w-8 text-center",children:s}),(0,n.jsx)(f.z,{variant:"outline",size:"icon",onClick:()=>p(s+1),"aria-label":"Increase quantity",children:(0,n.jsx)(l,{className:"h-4 w-4"})})]}),(0,n.jsx)("div",{className:"flex flex-col items-center gap-2 sm:items-end",children:(0,n.jsxs)(f.z,{variant:"destructive",size:"sm",onClick:()=>{h(parseInt(t))},className:"flex items-center gap-1",children:[(0,n.jsx)(d,{className:"h-4 w-4"}),"Eliminar"]})}),(0,n.jsx)("div",{className:"flex flex-col items-center gap-2 sm:items-end",children:(0,n.jsxs)("p",{className:"text-lg font-semibold",children:[v(a*s),"€"]})})]})}var x=r(914);function v(){let{cart:e,total:t,updateQuantity:r}=(0,i.j)(),{products:o}=(0,a.r)(),c=e.map(e=>{let t=o.find(t=>t.id===e.id),n=(null==t?void 0:t.price)||0;return n!==e.price&&r(e.id,e.quantity,n),{...e,product:t,price:n}});return(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsx)(x.default,{}),(0,n.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"El teu carro"}),0===c.length?(0,n.jsx)("p",{children:"El teu carro esta buit."}):(0,n.jsxs)(n.Fragment,{children:[c.map(e=>{var t,r,i;return(0,n.jsx)(h,{id:String(e.id),title:(null===(t=e.product)||void 0===t?void 0:t.title)||"",price:(null===(r=e.product)||void 0===r?void 0:r.price)||0,quantity:e.quantity,image:(null===(i=e.product)||void 0===i?void 0:i.images[0])||""},e.id)}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)("p",{className:"text-xl font-bold",children:["Total: ",t.toFixed(2),"€"]})}),(0,n.jsx)(s.default,{href:"/checkout",children:(0,n.jsx)(f.z,{className:"mt-4",children:"Comprar"})})]})]})}},914:function(e,t,r){"use strict";var n=r(7437),i=r(6463),a=r(495),s=r(4867);t.default=()=>{let e=(0,i.useRouter)();return(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(a.z,{onClick:()=>e.back(),children:(0,n.jsx)(s.Y4O,{className:"mr-2"})})})}},495:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var n=r(7437),i=r(2265),a=r(1538),s=r(2218),o=r(7440);let c=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef((e,t)=>{let{className:r,variant:i,size:s,asChild:u=!1,...l}=e,d=u?a.g7:"button";return(0,n.jsx)(d,{className:(0,o.cn)(c({variant:i,size:s,className:r})),ref:t,...l})});u.displayName="Button"},8277:function(e,t,r){"use strict";r.d(t,{m:function(){return n}});let n={basePath:"/images",optimizedPrefix:"optimized-",outputFormat:"webp",getOptimizedPath:e=>{let t=e.split("/").pop();if(!t)return e;let r=t.replace(/\.[^/.]+$/,"");return"".concat(n.basePath,"/").concat(n.optimizedPrefix).concat(r,".").concat(n.outputFormat)}}},9257:function(e,t,r){"use strict";r.d(t,{CartProvider:function(){return s},j:function(){return o}});var n=r(7437),i=r(2265);let a=(0,i.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,i.useState)([]),o=r.reduce((e,t)=>e+t.quantity,0),c=r.reduce((e,t)=>e+t.price*t.quantity,0);return(0,n.jsx)(a.Provider,{value:{cart:r,addToCart:(e,t)=>{s(r=>r.find(t=>t.id===e)?r.map(t=>t.id===e?{...t,quantity:t.quantity+1}:t):[...r,{id:e,quantity:1,price:t}])},removeFromCart:e=>{s(t=>t.filter(t=>t.id!==e))},updateQuantity:(e,t,r)=>{s(n=>n.map(n=>n.id===e?{...n,quantity:t,price:r}:n))},cartCount:o,total:c},children:t})}function o(){let e=(0,i.useContext)(a);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},2030:function(e,t,r){"use strict";r.d(t,{ProductProvider:function(){return o},r:function(){return c}});var n=r(7437),i=r(2265);let a=(0,i.createContext)(void 0);async function s(){let e=await fetch("/products.json");return Object.values(await e.json())}function o(e){let{children:t}=e,[r,o]=(0,i.useState)([]),[c,u]=(0,i.useState)(!0),[l,d]=(0,i.useState)(null);return(0,i.useEffect)(()=>{s().then(e=>{o(e),u(!1)}).catch(e=>{d(e),u(!1)})},[]),(0,n.jsx)(a.Provider,{value:{products:r,isLoading:c,error:l},children:t})}function c(){let e=(0,i.useContext)(a);if(void 0===e)throw Error("useProducts must be used within a ProductProvider");return e}},7440:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(4839),i=r(6164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,n.W)(t))}},8030:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(2265);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:l,iconNode:d,...f}=e;return(0,n.createElement)("svg",{ref:t,...s,width:i,height:i,stroke:r,strokeWidth:c?24*Number(o)/Number(i):o,className:a("lucide",u),...f},[...d.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(l)?l:[l]])}),c=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{className:c,...u}=r;return(0,n.createElement)(o,{ref:s,iconNode:t,className:a("lucide-".concat(i(e)),c),...u})});return r.displayName="".concat(e),r}},6648:function(e,t,r){"use strict";r.d(t,{default:function(){return i.a}});var n=r(5601),i=r.n(n)},5601:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return c},getImageProps:function(){return o}});let n=r(9920),i=r(497),a=r(8173),s=n._(r(1241));function o(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let c=a.Image}},function(e){e.O(0,[310,183,986,138,971,23,744],function(){return e(e.s=1418)}),_N_E=e.O()}]);